:root {
    --primary-gradient: linear-gradient(135deg, #1a1c29 0%, #0f0c29 100%);
    /* Darker night theme */
    --glass-bg: rgba(30, 30, 40, 0.6);
    --glass-border: rgba(255, 255, 255, 0.1);
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.6);
    --font-main: 'Outfit', sans-serif;
    --warning-bg: rgba(255, 71, 87, 0.2);
    --warning-border: rgba(255, 71, 87, 0.5);
    --gold: #ffd700;
}

body.light-theme {
    --primary-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    --glass-bg: rgba(255, 255, 255, 0.65);
    --glass-border: rgba(0, 0, 0, 0.1);
    --text-primary: #2d3436;
    --text-secondary: rgba(45, 52, 54, 0.6);
    --warning-bg: rgba(255, 71, 87, 0.15);
    --warning-border: rgba(255, 71, 87, 0.3);
}

body.light-theme .app-container {
    background: rgba(255, 255, 255, 0.8);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
}

/* Fix text contrast in light mode for specific elements if needed */
body.light-theme .search-box input,
body.light-theme #search-btn,
body.light-theme #settings-btn {
    color: var(--text-primary);
}

body.light-theme .search-box {
    background: rgba(0, 0, 0, 0.05);
    border-color: rgba(0, 0, 0, 0.1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-main);
    background: #000000;
    background: var(--primary-gradient);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    /* Changed from center to allow scrolling */
    padding-top: 2rem;
    padding-bottom: 2rem;
    color: var(--text-primary);
    overflow-y: auto;
    /* Allow scroll */
}

.app-container {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 24px;
    padding: 2rem;
    width: 95%;
    max-width: 480px;
    /* Slightly wider */
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
    position: relative;
    transition: all 0.3s ease;
}

header {
    margin-bottom: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}

.search-box {
    flex-grow: 1;
    margin-right: 1rem;
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 0.5rem 1rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: border-color 0.3s ease;
}

.search-box:focus-within {
    border-color: rgba(255, 255, 255, 0.4);
}

.search-box i {
    color: var(--text-secondary);
}

.search-box input {
    background: transparent;
    border: none;
    outline: none;
    color: var(--text-primary);
    width: 100%;
    margin: 0 0.5rem;
    font-family: var(--font-main);
    font-size: 1rem;
}

.search-box input::placeholder {
    color: var(--text-secondary);
}

/* Autocomplete Suggestions */
.search-box {
    position: relative;
    /* Ensure dropdown is relative to this */
}

.suggestions-list {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: rgba(30, 30, 40, 0.95);
    /* Opaque enough to read */
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    margin-top: 0.5rem;
    max-height: 200px;
    overflow-y: auto;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    animation: fadeIn 0.2s ease;
}

.suggestion-item {
    padding: 0.8rem 1rem;
    cursor: pointer;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    transition: background 0.2s ease;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.suggestion-item:last-child {
    border-bottom: none;
}

.suggestion-item:hover {
    background: rgba(255, 255, 255, 0.1);
}

.suggestion-item .flag {
    font-size: 1.2rem;
}

.suggestion-item .name {
    font-weight: 500;
}

.suggestion-item .country {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-left: 0.5rem;
}

#search-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--text-primary);
    transition: transform 0.2s ease;
}

#search-btn:hover {
    transform: scale(1.1);
}

#settings-btn {
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0.5rem;
    transition: transform 0.3s ease;
}

#settings-btn:hover {
    transform: rotate(45deg);
}

.settings-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    background: var(--glass-bg);
    backdrop-filter: blur(30px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 1rem;
    width: 200px;
    z-index: 1001;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    animation: fadeIn 0.2s ease;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
}

.setting-item select {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--glass-border);
    color: var(--text-primary);
    border-radius: 8px;
    padding: 0.2rem 0.5rem;
    outline: none;
}

.setting-item select option {
    background: #2d3436;
    /* Always dark for options visibility */
    color: #fff;
}

#theme-toggle {
    background: transparent;
    border: 1px solid var(--text-secondary);
    border-radius: 50%;
    width: 32px;
    height: 32px;
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s ease;
}

#theme-toggle:hover {
    background: rgba(255, 255, 255, 0.1);
}

.current-weather {
    text-align: center;
    animation: fadeIn 0.5s ease-out;
}

.weather-icon-container img {
    width: 120px;
    height: 120px;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
}

.temp-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    margin-top: -1rem;
}

.temp-container h1 {
    font-size: 5rem;
    font-weight: 700;
    line-height: 1;
}

.temp-container .unit {
    font-size: 1.5rem;
    margin-top: 1rem;
    color: var(--text-secondary);
}

#description {
    font-size: 1.2rem;
    color: var(--text-secondary);
    text-transform: capitalize;
    margin-bottom: 2rem;
}

/* Warnings */
.warnings-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    animation: fadeIn 0.3s ease;
}

.warning-banner {
    background: var(--warning-bg);
    border: 1px solid var(--warning-border);
    border-radius: 12px;
    padding: 0.8rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    color: #ffcccb;
}

.warning-banner i {
    font-size: 1.2rem;
}

.high-low {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-bottom: 2rem;
    font-weight: 600;
}

/* Details Grid */
.details-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
}

.detail-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    padding: 1rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    border: 1px solid transparent;
    transition: all 0.2s ease;
}

.detail-card:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.1);
}

.detail-icon {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2rem;
}

.detail-icon__compass {
    width: 40px;
    height: 40px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}

.compass-arrow {
    transition: transform 1s cubic-bezier(0.22, 1, 0.36, 1);
    color: var(--gold);
    font-size: 1.2rem;
}

.detail-info {
    display: flex;
    flex-direction: column;
}

.detail-info .label {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.detail-info .value {
    font-size: 1.2rem;
    font-weight: 700;
}

.detail-info .sub-text {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

/* Astro Section */
.astro-container {
    display: flex;
    justify-content: space-between;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 16px;
    padding: 1rem 1.5rem;
    margin-bottom: 2rem;
}

.astro-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.3rem;
    font-size: 0.9rem;
}

.astro-item i {
    color: var(--gold);
    margin-bottom: 0.2rem;
}

.details {
    display: flex;
    justify-content: space-around;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 16px;
    padding: 1rem;
}

.detail-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.detail-item i {
    font-size: 1.2rem;
    color: #4facfe;
}

.detail-item span {
    font-weight: 600;
    font-size: 1.1rem;
}

.detail-item p {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Animations and Utilities */
.hidden {
    display: none !important;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(255, 255, 255, 0.1);
    border-left-color: #ffffff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 2rem auto;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

#error-message {
    text-align: center;
    color: #ff6b6b;
    margin-top: 1rem;
    animation: fadeIn 0.3s ease;
}

/* Forecast Styles */
.forecast-container {
    margin-top: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    animation: fadeIn 0.7s ease-out;
}

.day-group {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 16px;
    padding: 1rem;
}

.day-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.8rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
    color: var(--text-secondary);
}

.hourly-scroll {
    display: flex;
    overflow-x: auto;
    gap: 1rem;
    padding-bottom: 0.5rem;
    /* Hide scrollbar for clean look */
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
}

.hourly-scroll::-webkit-scrollbar {
    display: none;
}

.forecast-card {
    min-width: 80px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 0.8rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    border: 1px solid transparent;
    transition: background 0.2s ease;
}

.forecast-card:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
}

.forecast-time {
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.forecast-icon {
    width: 40px;
    height: 40px;
}

.forecast-temp {
    font-weight: 700;
    font-size: 1.1rem;
}

.forecast-gusts {
    font-size: 0.75rem;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 4px;
}

.forecast-gusts i {
    font-size: 0.7rem;
    color: #ffd700;
    /* Goldish for wind/warning feeling */
}


/* News Section */
.news-section {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 20px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    margin-top: 2rem;
    animation: fadeIn 0.8s ease-out;
}

.news-section h3#news-title {
    margin-bottom: 1rem;
    font-size: 1.2rem;
    color: var(--text-secondary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
}

.news-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
}

.news-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 1rem;
    border: 1px solid transparent;
    transition: all 0.2s ease;
}

.news-card:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
}

.source-label {
    font-size: 0.65rem;
    text-transform: uppercase;
    color: var(--gold);
    background: rgba(255, 215, 0, 0.1);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    display: inline-block;
    margin-bottom: 0.5rem;
    letter-spacing: 1px;
    font-weight: 700;
}

.news-card h3 {
    font-size: 1rem !important;
    margin-bottom: 0.5rem !important;
    color: var(--text-primary) !important;
    line-height: 1.3 !important;
    border: none !important;
    padding: 0 !important;
}

.news-card p {
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.4;
    margin-bottom: 0.8rem;
}

.news-card a {
    color: #4facfe;
    text-decoration: none;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.news-card a:hover {
    color: #6fbefc;
}

/* --- Desktop Layout (Responsive) --- */
@media (min-width: 1024px) {
    .app-container {
        max-width: 1100px;
        /* Much wider for dashboard feel */
        padding: 3rem;
    }

    #weather-display {
        display: grid;
        grid-template-columns: 350px 1fr;
        /* Left sidebar, Right main content */
        grid-template-rows: auto auto 1fr;
        /* Rows adjust to content */
        gap: 2rem;
        grid-template-areas:
            "sidebar details"
            "sidebar astro"
            "sidebar news"
            "forecast forecast";
        align-items: start;
    }

    .news-section {
        grid-area: news;
        margin-bottom: 0;
    }

    .news-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }

    /* Assign Areas */
    .current-weather {
        grid-area: sidebar;
        background: rgba(255, 255, 255, 0.03);
        padding: 2rem;
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        /* height: 100%; */
        /* Fill column if possible */
    }

    .warnings-container {
        grid-area: sidebar;
        /* Move warnings inside sidebar visually via flex ordering if needed, 
           or just keep them in the flow. Actually, warnings are outside .current-weather in DOM.
           Let's handle that by making the sidebar area include both. 
           Wait, in DOM #weather-display children are: .current-weather, .details-grid, .astro, .forecast.
           #warnings-container is OUTSIDE #weather-display in index.html!
           We need to fix that structure or adjust grid.
           
           Let's adjusting grid to assume warnings are part of the 'header' or just move them via JS? 
           NO, let's keep it simple: simpler is to just let warnings be full width above, or move them into the grid.
           
           Actually, #warnings-container is a sibling of #weather-display.
           So it will stay above the grid. That's fine! 
        */
    }

    .details-grid {
        grid-area: details;
        grid-template-columns: repeat(3, 1fr);
        /* 3 columns for details */
        margin-bottom: 0;
    }

    .astro-container {
        grid-area: astro;
        margin-bottom: 0;
    }

    #forecast-container {
        grid-area: forecast;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        /* Grid of days */
        gap: 1.5rem;
    }

    .day-group {
        width: 100%;
    }

    /* Modify Forecast Card for grid view */
    .hourly-scroll {
        /* Keep scrolling but maybe show more? */
        /* Actually on desktop, vertical list of days with horizontal hourly is good. */
    }
}